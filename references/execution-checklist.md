# 执行检查清单（Execution Checklist）

## 阶段 0：会话启动
- 执行 `scripts/resume_cache_manager.py reset`。
- 记录结果：已删除旧缓存或无旧缓存。

## 阶段 1：输入收集与诊断
1. 检查模板简历：
   - `template-check`
   - 不存在则要求用户上传简历并执行 `template-init`
   - `template-show` 读取模板全文
2. 收集 JD（文本/URL/文件，必填）。
3. 输出 P1/P2/P3 分层诊断：
   - P1：关键要求
   - P2：重要资质
   - P3：加分项
4. 输出 gap 报告：已命中、可迁移、缺口（每项缺口给简短改进建议）。
5. 先让用户确认诊断结论，再进入初版生成。

## 阶段 2：逐条协商修改
- 每轮只提 1 条建议，等待确认后再下一条。
- 建议优先级：
  1. 补齐核心缺失关键词
  2. 用 JD 原词强化描述
  3. 调整内容顺序（相关内容前置）
  4. 删减低相关内容
- 每轮确认后都执行 `scripts/resume_cache_manager.py update`。

## 阶段 3：审阅前体量门禁

在输出“简历全文预览”前，必须先检测 `cache/resume-working.md`。

### 体量阈值（任一超限即触发收敛）
- 总字数：建议 520-760
- 非空行：建议 32-52
- Experience bullet 总数：建议 8-14
- 单条 bullet：不超过 2 行（约 28 个英文词）

### 收敛顺序（必须按序）
1. 删除低相关或重复信息
2. 合并同类 bullet
3. 压缩句式（保留四要素：action + keyword + method/tool + result）

### 收敛约束
- 不得编造事实。
- 不得删除关键资质（联系方式、核心技能、最高相关经历）。
- 必须保留 JD 核心关键词命中与量化结果。

### 审阅稿附带信息
- 原始体量
- 当前体量
- 删减/合并摘要
- 保留关键词清单

## 阶段 4：QA 与去 AI 化

进入排版前，输出 QA 报告并覆盖以下 4 类：
1. 结构逻辑：Summary 聚焦度、证据链、时间线一致性
2. 自然表达：调用 `humanizer`
3. 量化结果：每条经历检查四要素完整性
4. ATS 细节：关键词原词命中、时态统一、联系信息完整

注意：输出“简历全文预览”时，直接读取 `cache/resume-working.md`，不得凭记忆重构。

## 阶段 5：PDF 生成与质检
1. 用户明确批准全文后再生成。
2. 先调用 `pdf` skill，再生成 PDF。
3. 优先命令：
   - `scripts/generate_final_resume.py --input-md cache/resume-working.md --output-file ... --output-dir resume_output`
4. 质检必须覆盖：
   - A4
   - 1 页
   - 模块完整性
   - 文本层可提取
   - HTML 标签泄漏
   - 底部留白 3-8mm
5. 不通过则微调并重生成，直到通过。

## 阶段 6：收尾
1. 更新 `cache/user-profile.md`（长期偏好与方向日志）。
2. 保留 `cache/resume-working.md` 作为后续迭代基线。
3. 用户要求时再提供延伸建议（面试要点、Cover Letter 开头、Gap 应对）。
4. 提醒用户复核联系方式与敏感信息。

## 特殊场景策略

### 职业转型
- 保留时间线，同时前置目标岗位相关能力与代表项目。
- 用“可迁移技能映射”连接原岗位和目标岗位关键词。

### 应届生 / 早期职业
- 全职经历不足时可前置 Education。
- 用实习、课程项目、竞赛、开源贡献补足证据链。

### 高管 / 资深管理者
- 优先展示战略影响、组织升级、跨部门协同成果。
- 明确团队规模、预算、营收增长、利润改善。
- 信息密度很高且必要时可放宽到 2 页，但仍需 ATS 可解析。
